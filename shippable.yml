language: node_js

version:
  - 0.12

build:
  ci:
    - npm install -g mocha
    - npm install
    - npm run unit-tests
    - npm start &
    - npm run api-tests

  post_ci:
    - docker build -t shippabledocker/sample_node_ddc:$BRANCH.$BUILD_NUMBER .
    - docker push shippabledocker/sample_node_ddc:$BRANCH.$BUILD_NUMBER

integrations:
  hub:
    - integrationName : "ship-docker"
      type : docker
